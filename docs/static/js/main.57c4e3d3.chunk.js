(this["webpackJsonptaurit.perfectdiet.weighttracker.web"]=this["webpackJsonptaurit.perfectdiet.weighttracker.web"]||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var a,i,o=n(0),r=n(30),u=n(12),l=n(8),s=n(11),c=n(80),g=n(27),d=n(71),m=n(64),p=n(79),h={vote:function(){return function(e,t){var n=t();if(void 0!==n.googleAuth&&null!==n.googleAuth.email){var a=n.googleAuth.email;fetch("https://tauritcdncounter.azurewebsites.net/api/WeightTrackerVotes?email=".concat(a),{method:"POST"}).then((function(e){return e.json()})).then((function(t){e({type:"RECEIVE_NUM_VOTES",numVotes:t})})),e({type:"REQUEST_VOTE",email:a})}}}},b={numVotes:0};!function(e){e[e.Loading=0]="Loading",e[e.Initializing=1]="Initializing",e[e.Ready=2]="Ready"}(a||(a={})),function(e){e[e.LoggedOut=0]="LoggedOut",e[e.LoggedIn=1]="LoggedIn"}(i||(i={}));var f={libraryInitializationStatus:a.Loading,userLoginStatus:i.LoggedOut,email:null,username:null,jwtToken:null},y={googleAuth:function(e,t){if(void 0===e)return f;switch(t.type){case"AUTH_SET_INITIALIZING":return{libraryInitializationStatus:a.Initializing,userLoginStatus:i.LoggedOut,email:null,username:null,jwtToken:null};case"AUTH_SET_READY":case"AUTH_SIGN_OUT":return{libraryInitializationStatus:a.Ready,userLoginStatus:i.LoggedOut,email:null,username:null,jwtToken:null};case"AUTH_SIGN_IN":var n=t;return{libraryInitializationStatus:a.Ready,userLoginStatus:i.LoggedIn,email:n.email,username:n.username,jwtToken:n.jwtToken};default:return e}},votes:function(e,t){if(void 0===e)return b;switch(t.type){case"REQUEST_VOTE":return e;case"RECEIVE_NUM_VOTES":return{numVotes:t.numVotes};default:return b}}},E=n(72);var v=function(e){return o.createElement(o.Fragment,null,e.children)},O=n(21),j=n(22),I=n(24),k=n(23),w=n(26),T=n(25),L=n(74),S=n.n(L),z=n(38),A=(n(95),function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(k.a)(t).call(this,e))).googleLoadTimer=void 0,n.onSuccess=n.onSuccess.bind(Object(w.a)(n)),n.signOut=n.signOut.bind(Object(w.a)(n)),n.renderGoogleButton=n.renderGoogleButton.bind(Object(w.a)(n)),n}return Object(T.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.googleLoadTimer=setInterval((function(){gapi&&(clearInterval(e.googleLoadTimer),e.props.setInitializing(),e.initGoogle((function(){e.props.setReady()})))}),90)}},{key:"render",value:function(){return this.props.userLoginStatus===i.LoggedOut?this.renderLoggedOut():this.renderLoggedIn()}},{key:"renderGoogleButton",value:function(){this.props.libraryInitializationStatus===a.Ready&&gapi.signin2.render("google-sign-in-button",{width:150,height:40,onsuccess:this.onSuccess})}},{key:"renderLoggedOutMock",value:function(){return o.createElement("div",{id:"google-auth-box"},o.createElement("a",{className:"btn btn-sm btn-light"},"Wyloguj"))}},{key:"renderLoggedOut",value:function(){return setTimeout(this.renderGoogleButton,0),o.createElement("div",{id:"google-auth-box"},o.createElement("div",{id:"google-sign-in-button"}))}},{key:"renderLoggedIn",value:function(){return o.createElement("div",{id:"google-auth-box"},o.createElement("a",{className:"btn btn-sm btn-nopadding",onClick:this.signOut},"Wyloguj"))}},{key:"onSuccess",value:function(e){var t=e.getBasicProfile(),n=e.getAuthResponse().id_token;this.props.signIn(t.getEmail(),t.getGivenName(),n)}},{key:"initGoogle",value:function(e){gapi.load("auth2",(function(){gapi.auth2.init({client_id:"868879046273-u84c4daseb9i1i8d61j200pau7ish7pb.apps.googleusercontent.com",scope:"profile email"}).then(e)}))}},{key:"signOut",value:function(){var e=this;gapi.auth2.getAuthInstance().signOut().then((function(){console.log("User signed out."),e.props.signOut()}))}}]),t}(o.Component)),N=Object(u.c)((function(e){return e.googleAuth}),{setInitializing:function(){return{type:"AUTH_SET_INITIALIZING"}},setReady:function(){return{type:"AUTH_SET_READY"}},signOut:function(){return{type:"AUTH_SIGN_OUT"}},signIn:function(e,t,n){return{type:"AUTH_SIGN_IN",email:e,username:t,jwtToken:n}}})(A),_=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return o.createElement("nav",{id:"bottom-bar"},o.createElement(N,null))}},{key:"renderLoggedOut",value:function(){return o.createElement(o.Fragment,null,o.createElement(N,null))}},{key:"renderLoggedIn",value:function(){return o.createElement(z.a,{to:"/add-measurement",className:"btn btn-info"},"Dodaj pomiar")}}]),t}(o.Component),x=Object(u.c)((function(e){return e.googleAuth}))(_),V=(n(96),function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(k.a)(t).call(this,e))).xxx=void 0,n.addVote=n.addVote.bind(Object(w.a)(n)),n.xxx={options:{chart:{id:"basic-bar",toolbar:{show:!1},animations:{enabled:!1}},xaxis:{categories:["5 tygodni temu","4 tygodnie temu","3 tygodnie temu","2 tygodnie temu","tydzie\u0144 temu","dzi\u015b"]},stroke:{width:[5,3],dashArray:[0,5]},legend:{show:!0,position:"bottom",offsetY:-10}},series:[{name:"Twoja waga (przyk\u0142ad)",data:[60,60.1,60.9,60.7,61.1,null]},{name:"Optymalny przyrost",data:[60,60.34,60.68,61.02,61.36,61.7]}]},n}return Object(T.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return void 0!==this.props.googleAuth?o.createElement(o.Fragment,null,o.createElement("div",{id:"weight-tracker-chart-container"},o.createElement(S.a,{options:this.xxx.options,series:this.xxx.series,type:"line"})),this.props.googleAuth.userLoginStatus===i.LoggedIn?this.renderValidationPeriodMessage():null,o.createElement(x,null)):null}},{key:"renderValidationPeriodMessage",value:function(){return void 0!==this.props.votes?o.createElement("div",{className:"validation-period"},o.createElement("p",null,"\u015aledzenie wagi nie jest jeszcze dost\u0119pne."),o.createElement("p",null,"Mo\u017cesz ",o.createElement("strong",null,"zag\u0142osowa\u0107 za dodaniem tej opcji"),". Gdy liczba g\u0142os\xf3w przekroczy 50, to funkcja zostanie dodana :)"),this.props.votes.numVotes>0?o.createElement("div",{className:"number-of-votes-box"},"Liczba g\u0142os\xf3w: ",o.createElement("strong",null,this.props.votes.numVotes),o.createElement("br",null),"Dzi\u0119ki!:)"):null,o.createElement("button",{className:"btn btn-primary",onClick:this.addVote},"Dodaj g\u0142os ode mnie!")):null}},{key:"addVote",value:function(){this.props.vote()}}]),t}(o.Component)),R=Object(u.c)((function(e){return e}),h)(V),U=n(75),D=n.n(U),G=(n(97),n(98),n(78)),C=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(i)))).state={startDate:new Date},n.handleChange=function(e){n.setState({startDate:e})},n}return Object(T.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement("form",{id:"add-measurement-form"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"weightDatePicker"},"Data pomiaru"),o.createElement("br",null),o.createElement(D.a,{id:"weightDatePicker",selected:this.state.startDate,onChange:this.handleChange,locale:G.a,dateFormat:"yyyy-MM-dd",className:"form-control"})),o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"weight-input"},"Waga"),o.createElement("input",{type:"number",step:"0.1",className:"form-control",id:"weight-input"})),o.createElement("button",{type:"submit",id:"save-weight",className:"btn btn-primary"},"Zapisz wag\u0119"),o.createElement(z.a,{to:"/",className:"btn btn-warning "},"Anuluj")))}}]),t}(o.Component),M=Object(u.c)()(C),H=(n(159),document.getElementsByTagName("base")[0].getAttribute("href")),B=function(e,t){var n=[d.a,Object(m.a)(e)],a=Object(g.combineReducers)(Object(c.a)({},y,{router:Object(p.a)(e)}));return Object(g.createStore)(a,t,Object(E.composeWithDevTools)(g.applyMiddleware.apply(void 0,n)))}(Object(s.a)({basename:H}));r.render(o.createElement(u.a,{store:B},o.createElement(l.a,null,o.createElement((function(){return o.createElement(v,null,o.createElement(l.b,{exact:!0,path:"/",component:R}),o.createElement(l.b,{path:"/add-measurement",component:M}))}),null))),document.getElementById("weight-tracker-widget"))},81:function(e,t,n){e.exports=n(160)},95:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.57c4e3d3.chunk.js.map